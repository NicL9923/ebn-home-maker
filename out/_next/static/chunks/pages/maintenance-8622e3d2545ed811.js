(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[627],{99468:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/maintenance",function(){return t(48183)}])},48183:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return M}});var i=t(28598),a=t(82684),r=t(70136),s=t(97648),c=t(96627),l=t(73073),d=t(41826),o=t(96731),u=t(74451),h=t(82015),f=t(42658),x=t(93720),Z=t(82561),v=t(81904),m=t(37559),j=t(40076),g=t(18567),p=t(35127),y=t(51537),C=t(10673),S=t(84446),b=t(54219),E=t(55402),P=t(63422),k={name:"",yearBuilt:"",yearPurchased:"",maintenanceMarkers:[],serviceLogEntries:[]},I=function(e){var n=(0,a.useContext)(l.Il).setSnackbarData,t=(0,a.useContext)(d.f),r=(0,a.useContext)(l.St),s=r.profile,o=r.family,u=r.getFamily,h=e.isOpen,f=e.setIsOpen,Z=e.getResidences,I=(0,a.useState)(k),F=I[0],L=I[1],O=(0,a.useState)(null),w=O[0],N=O[1];return(0,i.jsxs)(j.Z,{open:h,onClose:function(){return f(!1)},fullWidth:!0,children:[(0,i.jsx)(g.Z,{children:"Add Residence"}),(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(y.Z,{autoFocus:!0,variant:"standard",label:"Name",placeholder:"My House!",value:F.name,onChange:function(e){return L((0,m.Z)((0,v.Z)({},F),{name:e.target.value}))}}),(0,i.jsx)(C.Z,{children:"Upload Photo"}),(0,i.jsx)(b.DropzoneArea,{acceptedFiles:["image/jpeg","image/png"],filesLimit:1,onChange:function(e){return N(e[0])},fileObjects:[]}),(0,i.jsx)(y.Z,{variant:"standard",label:"Year Built",value:F.yearBuilt,onChange:function(e){return L((0,m.Z)((0,v.Z)({},F),{yearBuilt:e.target.value}))}}),(0,i.jsx)(y.Z,{variant:"standard",label:"Year Purchased",value:F.yearPurchased,onChange:function(e){return L((0,m.Z)((0,v.Z)({},F),{yearPurchased:e.target.value}))}})]}),(0,i.jsxs)(S.Z,{children:[(0,i.jsx)(x.Z,{onClick:function(){return f(!1)},children:"Cancel"}),(0,i.jsx)(x.Z,{variant:"contained",onClick:function(){if(o&&s){var e=(0,E.Z)(),i=[];if(o.residences&&(i=(0,c.Z)(o.residences)),i.push(e),t.createResidence(e,(0,m.Z)((0,v.Z)({},F),{id:e})).then((function(){t.updateFamily(s.familyId,{residences:i}).then((function(){u(),f(!1),L(k),n({msg:"Successfully added residence!",severity:"success"})}))})),w){var a=(0,P.cF)(),r=(0,P.iH)(a,(0,E.Z)());(0,P.KV)(r,w).then((function(n){(0,P.Jt)(n.ref).then((function(n){t.updateResidence(e,{img:n}).then((function(){Z(),N(null)}))}))}))}}},children:"Add"})]})]})},F=t(43813),L=t(18324),O=t(8514),w=t(86298),N=function(){var e=(0,a.useContext)(d.f),n=(0,a.useContext)(l.St),t=n.profile,v=n.family,m=n.getFamily,j=(0,a.useState)([]),g=j[0],p=j[1],y=(0,a.useState)(!1),C=y[0],S=y[1],b=(0,a.useState)(!1),E=b[0],P=b[1],k=function(){if(null===v||void 0===v?void 0:v.residences){S(!0);var n=[];v.residences.forEach((function(t){e.getResidence(t).then((function(e){if(e.exists()){var t=e.data();t.serviceLogEntries.forEach((function(e,n){e.date=new Date(e.date).toLocaleDateString(),e.id=n})),n.push(t),p(n)}}))})),S(!1)}};return(0,a.useEffect)((function(){v&&k()}),[v]),(0,i.jsxs)(r.Z,{mt:2,children:[(0,i.jsx)(s.Z,{variant:"h4",children:"Residences"}),g?(0,i.jsx)(u.ZP,{container:!0,mt:2,mb:2,gap:2,children:g.map((function(n){return(0,i.jsx)(u.ZP,{container:!0,item:!0,xs:12,md:6,lg:4,children:(0,i.jsxs)(h.Z,{sx:{p:2},children:[n.img?(0,i.jsx)(w.Z,{height:"250",src:n.img}):(0,i.jsx)(f.Z,{children:(0,i.jsx)(L.Z,{sx:{fontSize:200}})}),(0,i.jsx)(s.Z,{variant:"h5",children:n.name}),(0,i.jsxs)(s.Z,{variant:"body1",children:["Built: ",n.yearBuilt]}),(0,i.jsxs)(s.Z,{variant:"body1",children:["Purchased: ",n.yearPurchased]}),(0,i.jsx)(s.Z,{variant:"h6",mt:2,children:"Service Log"}),(0,i.jsx)(r.Z,{height:300,children:(0,i.jsx)(F._,{columns:[{field:"date",headerName:"Date"},{field:"note",headerName:"Note",flex:1}],rows:n.serviceLogEntries,pageSize:5,rowsPerPageOptions:[5,10,20]})}),(0,i.jsx)(x.Z,{variant:"contained",startIcon:(0,i.jsx)(O.Z,{}),sx:{mt:1},children:"Add to log"}),(0,i.jsx)(s.Z,{variant:"h6",mt:2,children:"Maintenance"}),(0,i.jsx)(x.Z,{variant:"contained",startIcon:(0,i.jsx)(O.Z,{}),sx:{mt:1},children:"Edit maintenance schedule"}),(0,i.jsxs)(Z.Z,{direction:"row",justifyContent:"right",spacing:1,mt:3,children:[(0,i.jsx)(x.Z,{variant:"outlined",children:"Edit"}),(0,i.jsx)(x.Z,{variant:"text",onClick:function(){return i=n.id,void(v&&t&&e.deleteResidence(i).then((function(){var n=(0,c.Z)(v.residences);n.splice(n.findIndex((function(e){return e===i})),1),e.updateFamily(t.familyId,{residences:n}).then((function(){return m()}))})));var i},children:"Delete"})]})]})},n.name)}))}):C&&(0,i.jsx)(r.Z,{mx:"auto",textAlign:"center",mt:20,children:(0,i.jsx)(o.Z,{})}),(0,i.jsx)(x.Z,{variant:"contained",onClick:function(){return P(!0)},children:"Add residence"}),(0,i.jsx)(I,{isOpen:E,setIsOpen:P,getResidences:k})]})},V={year:"",make:"",model:"",trim:"",engine:"",vin:"",licensePlate:"",miles:0,maintenanceMarkers:[],serviceLogEntries:[]},_=function(e){var n=(0,a.useContext)(l.Il).setSnackbarData,t=(0,a.useContext)(d.f),r=(0,a.useContext)(l.St),s=r.profile,o=r.family,u=r.getFamily,h=e.isOpen,f=e.setIsOpen,Z=e.getVehicles,k=(0,a.useState)(V),I=k[0],F=k[1],L=(0,a.useState)(null),O=L[0],w=L[1];return(0,i.jsxs)(j.Z,{open:h,onClose:function(){return f(!1)},children:[(0,i.jsx)(g.Z,{children:"Add Vehicle"}),(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(y.Z,{autoFocus:!0,variant:"standard",label:"Model Year",value:I.year,onChange:function(e){return F((0,m.Z)((0,v.Z)({},I),{year:e.target.value}))}}),(0,i.jsx)(y.Z,{variant:"standard",label:"Make",placeholder:"Chevrolet, Ford, Dodge, Toyota...",value:I.make,onChange:function(e){return F((0,m.Z)((0,v.Z)({},I),{make:e.target.value}))}}),(0,i.jsx)(y.Z,{variant:"standard",label:"Model",placeholder:"F150, Corolla, Tacoma, Tahoe...",value:I.model,onChange:function(e){return F((0,m.Z)((0,v.Z)({},I),{model:e.target.value}))}}),(0,i.jsx)(y.Z,{variant:"standard",label:"Trim",placeholder:"SE, Limited...",value:I.trim,onChange:function(e){return F((0,m.Z)((0,v.Z)({},I),{trim:e.target.value}))}}),(0,i.jsx)(y.Z,{variant:"standard",label:"Engine",placeholder:"3.5L V6...",value:I.engine,onChange:function(e){return F((0,m.Z)((0,v.Z)({},I),{engine:e.target.value}))}}),(0,i.jsx)(y.Z,{variant:"standard",label:"VIN (Vehicle Identification Number)",value:I.vin,onChange:function(e){return F((0,m.Z)((0,v.Z)({},I),{vin:e.target.value}))}}),(0,i.jsx)(y.Z,{variant:"standard",label:"License Plate",value:I.licensePlate,onChange:function(e){return F((0,m.Z)((0,v.Z)({},I),{licensePlate:e.target.value}))}}),(0,i.jsx)(y.Z,{variant:"standard",label:"Odometer (miles)",value:I.miles,onChange:function(e){return F((0,m.Z)((0,v.Z)({},I),{miles:parseInt(e.target.value)}))}}),(0,i.jsx)(C.Z,{children:"Upload Photo"}),(0,i.jsx)(b.DropzoneArea,{acceptedFiles:["image/jpeg","image/png"],filesLimit:1,onChange:function(e){return w(e[0])},fileObjects:[]})]}),(0,i.jsxs)(S.Z,{children:[(0,i.jsx)(x.Z,{onClick:function(){return f(!1)},children:"Cancel"}),(0,i.jsx)(x.Z,{variant:"contained",onClick:function(){if(o&&s){var e=(0,E.Z)(),i=[];if(o.vehicles&&(i=(0,c.Z)(o.vehicles)),i.push(e),t.createVehicle(e,(0,m.Z)((0,v.Z)({},I),{id:e})).then((function(){t.updateFamily(s.familyId,{vehicles:i}).then((function(){u(),f(!1),F(V),n({msg:"Successfully added vehicle!",severity:"success"})}))})),O){var a=(0,P.cF)(),r=(0,P.iH)(a,(0,E.Z)());(0,P.KV)(r,O).then((function(n){(0,P.Jt)(n.ref).then((function(n){t.updateVehicle(e,{img:n}).then((function(){Z(),w(null)}))}))}))}}},children:"Add"})]})]})},A=t(82353),D=function(){var e=(0,a.useContext)(d.f),n=(0,a.useContext)(l.St),t=n.profile,v=n.family,m=n.getFamily,j=(0,a.useState)([]),g=j[0],p=j[1],y=(0,a.useState)(!1),C=y[0],S=y[1],b=(0,a.useState)(!1),E=b[0],P=b[1],k=function(){if(null===v||void 0===v?void 0:v.vehicles){S(!0);var n=[];v.vehicles.forEach((function(t){e.getVehicle(t).then((function(e){if(e.exists()){var t=e.data();t.serviceLogEntries.forEach((function(e,n){e.date=new Date(e.date).toLocaleDateString(),e.id=n})),n.push(t),p(n)}}))})),S(!1)}};return(0,a.useEffect)((function(){v&&k()}),[v]),(0,i.jsxs)(r.Z,{mt:4,children:[(0,i.jsx)(s.Z,{variant:"h4",children:"Vehicles"}),g?(0,i.jsx)(u.ZP,{container:!0,mt:2,mb:2,gap:2,children:g.map((function(n){return(0,i.jsx)(u.ZP,{container:!0,item:!0,xs:12,md:6,lg:4,children:(0,i.jsxs)(h.Z,{sx:{p:2},children:[n.img?(0,i.jsx)(w.Z,{height:"250",src:n.img}):(0,i.jsx)(f.Z,{children:(0,i.jsx)(A.Z,{sx:{fontSize:200}})}),(0,i.jsxs)(s.Z,{variant:"h5",children:[n.year," ",n.make," ",n.model," ",n.trim]}),(0,i.jsxs)(s.Z,{variant:"body1",children:["Engine: ",n.engine]}),(0,i.jsxs)(s.Z,{variant:"body1",children:["Odometer: ",n.miles," mi"]}),(0,i.jsxs)(s.Z,{variant:"body1",children:["VIN: ",n.vin]}),(0,i.jsxs)(s.Z,{variant:"body1",children:["License Plate: ",n.licensePlate]}),(0,i.jsx)(s.Z,{variant:"h6",mt:2,children:"Service Log"}),(0,i.jsx)(r.Z,{height:300,children:(0,i.jsx)(F._,{columns:[{field:"date",headerName:"Date"},{field:"note",headerName:"Note"}],rows:n.serviceLogEntries,pageSize:5,rowsPerPageOptions:[5,10,20],getRowId:function(e){return e.date}})}),(0,i.jsx)(x.Z,{variant:"contained",startIcon:(0,i.jsx)(O.Z,{}),sx:{mt:1},children:"Add to log"}),(0,i.jsx)(s.Z,{variant:"h6",mt:2,children:"Maintenance"}),(0,i.jsx)(x.Z,{variant:"contained",startIcon:(0,i.jsx)(O.Z,{}),sx:{mt:1},children:"Edit maintenance schedule"}),(0,i.jsxs)(Z.Z,{direction:"row",justifyContent:"right",spacing:1,mt:3,children:[(0,i.jsx)(x.Z,{variant:"outlined",children:"Edit"}),(0,i.jsx)(x.Z,{variant:"text",onClick:function(){return i=n.id,void(v&&t&&e.deleteVehicle(i).then((function(){var n=(0,c.Z)(v.vehicles);n.splice(n.findIndex((function(e){return e===i})),1),e.updateFamily(t.familyId,{vehicles:n}).then((function(){return m()}))})));var i},children:"Delete"})]})]})},n.vin)}))}):C&&(0,i.jsx)(r.Z,{mx:"auto",textAlign:"center",mt:20,children:(0,i.jsx)(o.Z,{})}),(0,i.jsx)(x.Z,{variant:"contained",onClick:function(){return P(!0)},children:"Add vehicle"}),(0,i.jsx)(_,{isOpen:E,setIsOpen:P,getVehicles:k})]})},M=function(){return(0,i.jsxs)(r.Z,{maxWidth:"lg",mx:"auto",mt:2,children:[(0,i.jsx)(s.Z,{variant:"h3",children:"Home & Auto Maintenance"}),(0,i.jsx)(N,{}),(0,i.jsx)(D,{})]})}}},function(e){e.O(0,[876,28,737,287,203,774,888,179],(function(){return n=99468,e(e.s=n);var n}));var n=e.O();_N_E=n}]);