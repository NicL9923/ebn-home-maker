(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{48312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(89698)}])},89698:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return W}});var i=t(28598),r=t(42658),a=t(82561),s=t(97648),o=t(96731),c=t(83966),l=t(82684),u=t(61583),d=t.n(u),h=t(73073),x=t(84166),f=t(55512),m=t(55056),j=t.n(m),p=t(82015),Z=t(99881),v=t(21324),y=t(70136),g=t(93720),C=t(40076),w=t(18567),b=t(35127),k=t(51537),S=t(84446),F=t(76159),I=t(34527),_=t(13032),A=t(41826),O=function(){var e=(0,l.useContext)(A.f),n=(0,l.useContext)(h.St),t=n.profile,r=n.family,c=n.getFamily,u=(0,l.useState)(null),d=u[0],x=u[1],f=(0,l.useState)(null),m=f[0],O=f[1],W=(0,l.useState)(null),z=W[0],P=W[1],E=(0,l.useState)(null),M=E[0],L=E[1],D=(0,l.useState)(0),H=D[0],N=D[1],T=(0,l.useState)(!0),R=T[0],K=T[1],q=(0,l.useState)(!1),G=q[0],X=q[1],Y=(0,l.useState)(""),J=Y[0],Q=Y[1],U=function(e){if(e>=0&&e<=6)return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e];console.error("ERROR: Incorrect day of week")},V=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:48;if(e>=200&&e<=299)return(0,i.jsx)(_.YSA,{size:n});if(e>=300&&e<=399)return(0,i.jsx)(_.IC8,{size:n});if(e>=500&&e<=504)return(0,i.jsx)(_.IC8,{size:n});if(511===e)return(0,i.jsx)(_.DRl,{size:n});if(e>=520&&e<=531)return(0,i.jsx)(_.IC8,{size:n});if(e>=600&&e<=699)return(0,i.jsx)(_.DRl,{size:n});if(e>=700&&e<=799)return(0,i.jsx)(_.QGj,{size:n});if(800===e||801===e){var t=(new Date).getHours(),r=t>=6&&t<=18;return 800===e?r?(0,i.jsx)(_.Rq0,{size:n}):(0,i.jsx)(_.KCd,{size:n}):r?(0,i.jsx)(_.GW5,{size:n}):(0,i.jsx)(_.tNw,{size:n})}return 802===e||803===e||804===e?(0,i.jsx)(_.l64,{size:n}):void 0};return(0,l.useEffect)((function(){if((null===r||void 0===r?void 0:r.location)&&(null===r||void 0===r?void 0:r.openweathermap_api_key)){K(!0);var e="https://api.openweathermap.org/data/2.5/onecall?lat=".concat(r.location.lat,"&lon=").concat(r.location.long,"&exclude=minutely&appid=").concat(r.openweathermap_api_key,"&units=imperial");j().get(e).then((function(e){K(!1),e.data?(x(e.data.current),e.data.alerts&&O(e.data.alerts),P(e.data.hourly.slice(1,13)),L(e.data.daily.slice(1,6))):console.error("Error: weather data missing")})).catch((function(e){console.error("Error getting weather: "+e)}))}}),[r]),(null===r||void 0===r?void 0:r.openweathermap_api_key)?(0,i.jsxs)(a.Z,{alignItems:"center",justifyContent:"center",mb:6,children:[(0,i.jsx)(s.Z,{variant:"h4",children:"Weather"}),(0,i.jsxs)(F.Z,{value:H,onChange:function(e,n){return N(n)},children:[(0,i.jsx)(I.Z,{label:"Current"}),(0,i.jsx)(I.Z,{label:"Hourly"}),(0,i.jsx)(I.Z,{label:"Daily"})]}),R?(0,i.jsx)(y.Z,{mx:"auto",textAlign:"center",mt:20,children:(0,i.jsx)(o.Z,{})}):(0,i.jsxs)(y.Z,{children:[0===H&&(0,i.jsx)(i.Fragment,{children:function(){if(d){var e={condition:d.weather[0].main,iconCode:d.weather[0].id,temp:Math.trunc(d.temp),feelsLike:Math.trunc(d.feels_like),humidity:d.humidity,wind:Math.trunc(d.wind_speed)};return(0,i.jsx)(p.Z,{children:(0,i.jsxs)(a.Z,{direction:"column",alignItems:"center",justifyContent:"center",textAlign:"center",mt:3,pl:5,pr:5,pt:2,pb:2,children:[(0,i.jsx)(s.Z,{variant:"h4",children:e.condition}),V(e.iconCode,108),(0,i.jsxs)(s.Z,{variant:"h4",children:[e.temp,"\xb0F"]}),(0,i.jsxs)(s.Z,{variant:"h6",children:["Feels like ",e.feelsLike,"\xb0"]}),(0,i.jsxs)(s.Z,{variant:"body1",children:["Humidity: ",e.humidity,"%"]}),(0,i.jsxs)(s.Z,{variant:"body1",children:["Wind: ",e.wind,"mph"]})]})})}}()}),1===H&&(0,i.jsx)(i.Fragment,{children:function(){if(z){var e=[];return z.forEach((function(n){e.push({hour:new Date(1e3*n.dt).getHours(),iconCode:n.weather[0].id,condition:n.weather[0].main,temp:Math.trunc(n.temp),feelsLike:Math.trunc(n.feels_like),rainChance:n.pop,humidity:n.humidity})})),(0,i.jsx)(a.Z,{spacing:1,mt:2,children:e.map((function(e){return(0,i.jsx)(p.Z,{children:(0,i.jsxs)(a.Z,{direction:"row",alignItems:"center",justifyContent:"space-evenly",textAlign:"center",width:{xs:"95vw",sm:"60vw",md:"35vw",lg:"25vw"},children:[(0,i.jsx)(s.Z,{variant:"subtitle1",children:e.hour<12?"".concat(e.hour," AM"):"".concat(12===e.hour?e.hour:e.hour-12," PM")}),(0,i.jsxs)(a.Z,{children:[V(e.iconCode),(0,i.jsx)(s.Z,{variant:"subtitle2",children:e.condition})]}),(0,i.jsxs)(s.Z,{variant:"h6",children:[e.temp,"\xb0F"]}),(0,i.jsxs)(a.Z,{children:[(0,i.jsxs)(s.Z,{variant:"subtitle2",children:["Feels like: ",e.feelsLike,"\xb0"]}),(0,i.jsxs)(s.Z,{variant:"subtitle2",children:["Humidity: ",e.humidity,"%"]})]})]},e.hour)},e.hour)}))})}}()}),2===H&&(0,i.jsx)(i.Fragment,{children:function(){if(M){var e=[];return M.forEach((function(n){e.push({day:U(new Date(1e3*n.dt).getDay()),iconCode:n.weather[0].id,condition:n.weather[0].main,tempHigh:Math.trunc(n.temp.max),tempLow:Math.trunc(n.temp.min)})})),(0,i.jsx)(a.Z,{spacing:2,m:2,children:e.map((function(e){return(0,i.jsx)(p.Z,{children:(0,i.jsxs)(a.Z,{direction:"row",alignItems:"center",justifyContent:"space-evenly",textAlign:"center",width:{xs:"95vw",sm:"60vw",md:"35vw",lg:"25vw"},children:[(0,i.jsx)(s.Z,{variant:"h6",children:e.day}),(0,i.jsxs)(a.Z,{children:[V(e.iconCode),(0,i.jsx)(s.Z,{variant:"subtitle1",children:e.condition})]}),(0,i.jsxs)(a.Z,{children:[(0,i.jsxs)(s.Z,{variant:"body1",children:["High: ",e.tempHigh,"\xb0F"]}),(0,i.jsxs)(s.Z,{variant:"body1",children:["Low: ",e.tempLow,"\xb0F"]})]})]},e.day)},e.day)}))})}}()}),function(){if(m){var e=[];if(m.forEach((function(n){e.push({event:n.event,reporter:n.sender_name,description:n.description})})),e)return(0,i.jsx)(a.Z,{direction:"column",alignContent:"center",mb:4,mt:2,children:e.map((function(e){return(0,i.jsxs)(Z.Z,{severity:"error",children:[(0,i.jsx)(v.Z,{children:e.event}),(0,i.jsx)("h5",{children:e.reporter}),(0,i.jsx)("p",{children:e.description})]},e.event)}))})}}()]})]}):(0,i.jsx)(y.Z,{textAlign:"center",maxWidth:"sm",mx:"auto",children:(0,i.jsxs)(p.Z,{sx:{p:2},children:[(0,i.jsx)(s.Z,{variant:"h5",mb:1,children:"Want to see the weather here?"}),(0,i.jsx)(s.Z,{variant:"subtitle1",mb:3,children:"Obtain a free 'Current Weather' API key from OpenWeatherMap (https://openweathermap.org/price), input it below, then set your family location on your profile page"}),(0,i.jsx)(g.Z,{variant:"contained",onClick:function(){return X(!0)},children:"Set API Key"}),(0,i.jsxs)(C.Z,{open:G,onClose:function(){return X(!1)},fullWidth:!0,children:[(0,i.jsx)(w.Z,{children:"Set Weather API Key"}),(0,i.jsx)(b.Z,{children:(0,i.jsx)(k.Z,{autoFocus:!0,variant:"standard",label:"API Key",value:J,onChange:function(e){return Q(e.target.value)}})}),(0,i.jsxs)(S.Z,{children:[(0,i.jsx)(g.Z,{onClick:function(){return X(!1)},children:"Cancel"}),(0,i.jsx)(g.Z,{variant:"contained",onClick:function(){t&&e.updateFamily(t.familyId,{openweathermap_api_key:J,location:{lat:"39.83",long:"-98.58"}}).then((function(){c()}))},children:"Save"})]})]})]})})},W=function(){var e=(0,l.useContext)(h.St),n=e.profile,t=e.family,u=e.isFetchingProfile,m=e.isFetchingFamily;return(0,i.jsxs)(r.Z,{children:[(0,i.jsxs)(a.Z,{direction:"column",alignItems:"center",mb:5,children:[(0,i.jsx)(c.Z,{component:s.Z,variant:"h2",children:(0,i.jsx)(d(),{format:"h:mm A",ticking:!0})}),n?(0,i.jsxs)(s.Z,{variant:"h5",children:["Welcome back, ",n.firstName,"!"]}):u?(0,i.jsx)(c.Z,{mx:"auto",textAlign:"center",mt:20,children:(0,i.jsx)(o.Z,{size:60})}):(0,i.jsx)(f.Z,{}),t&&(0,i.jsxs)(s.Z,{variant:"h6",children:["The ",t.name," family"]})]}),t?(0,i.jsx)(O,{}):m?(0,i.jsx)(c.Z,{mx:"auto",textAlign:"center",mt:20,children:(0,i.jsx)(o.Z,{size:60})}):n&&(0,i.jsx)(x.Z,{})]})}},84166:function(e,n,t){"use strict";t.d(n,{Z:function(){return y}});var i=t(28598),r=t(70136),a=t(82015),s=t(97648),o=t(80464),c=t(82561),l=t(93720),u=t(82684),d=t(40076),h=t(18567),x=t(35127),f=t(51537),m=t(84446),j=t(55402),p=t(73073),Z=t(41826),v=function(e){var n=(0,u.useContext)(p.Il).setSnackbarData,t=(0,u.useContext)(Z.f),r=(0,u.useContext)(p.St),a=r.userId,s=r.getProfile,o=r.getFamily,v=e.isOpen,y=e.setIsOpen,g=(0,u.useState)(void 0),C=g[0],w=g[1];return(0,i.jsxs)(d.Z,{open:v,onClose:function(){return y(!1)},fullWidth:!0,children:[(0,i.jsx)(h.Z,{children:"Create Family"}),(0,i.jsx)(x.Z,{children:(0,i.jsx)(c.Z,{children:(0,i.jsx)(f.Z,{autoFocus:!0,variant:"standard",label:"Family (Last) Name",value:C,onChange:function(e){return w(e.target.value)},required:!0})})}),(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(l.Z,{onClick:function(){return y(!1)},children:"Cancel"}),(0,i.jsx)(l.Z,{variant:"contained",onClick:function(){if(a&&C){var e=(0,j.Z)(),i={name:C,headOfFamily:a,members:[a],boardMarkdown:"This is the family board!",pets:[],vehicles:[],residences:[],groceryList:[]};t.createFamily(e,i).then((function(){o(),n({msg:"Successfully created family!",severity:"success"})})),t.updateProfile(a,{familyId:e}).then((function(){s()})),y(!1)}},children:"Create"})]})]})},y=function(){var e=(0,u.useState)(!1),n=e[0],t=e[1];return(0,i.jsx)(r.Z,{maxWidth:"sm",mx:"auto",mt:3,children:(0,i.jsxs)(a.Z,{sx:{p:2},children:[(0,i.jsx)(s.Z,{variant:"h5",mb:3,children:"We couldn't find a family for this profile!"}),(0,i.jsx)(s.Z,{variant:"h6",textAlign:"center",children:"Ask your head-of-household for their family invite link"}),(0,i.jsx)(o.Z,{sx:{width:250,mx:"auto",mt:2,mb:2},children:"OR"}),(0,i.jsx)(c.Z,{direction:"row",justifyContent:"center",children:(0,i.jsx)(l.Z,{variant:"contained",onClick:function(){return t(!0)},children:"Create a family"})}),(0,i.jsx)(v,{isOpen:n,setIsOpen:t})]})})}},55512:function(e,n,t){"use strict";t.d(n,{Z:function(){return b}});var i=t(28598),r=t(70136),a=t(82015),s=t(97648),o=t(82561),c=t(93720),l=t(82684),u=t(81904),d=t(37559),h=t(40076),x=t(18567),f=t(35127),m=t(51537),j=t(10673),p=t(84446),Z=t(54219),v=t(73073),y=t(41826),g=t(63422),C=t(55402),w=function(e){var n=(0,l.useContext)(v.Il).setSnackbarData,t=(0,l.useContext)(y.f),r=(0,l.useContext)(v.St),a=r.userId,s=r.getProfile,o=e.isOpen,w=e.setIsOpen,b=(0,l.useState)(void 0),k=b[0],S=b[1],F=(0,l.useState)(void 0),I=F[0],_=F[1],A=(0,l.useState)(null),O=A[0],W=A[1];return(0,i.jsxs)(h.Z,{open:o,onClose:function(){return w(!1)},fullWidth:!0,children:[(0,i.jsx)(x.Z,{children:"Create Profile"}),(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(m.Z,{autoFocus:!0,variant:"standard",label:"First Name",value:k,onChange:function(e){return S(e.target.value)},required:!0,error:!!I,helperText:I}),(0,i.jsx)(j.Z,{sx:{mt:3},children:"Upload Photo"}),(0,i.jsx)(Z.DropzoneArea,{acceptedFiles:["image/jpeg","image/png"],filesLimit:1,onChange:function(e){return W(e[0])},fileObjects:[]})]}),(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(c.Z,{onClick:function(){return w(!1)},children:"Cancel"}),(0,i.jsx)(c.Z,{variant:"contained",onClick:function(){if((k?k.includes(" ")?(_("The name cannot contain spaces!"),0):(_(void 0),1):(_("You must input a name!"),0))&&a&&k){var e={firstName:k,familyId:""};if(O){var i=(0,g.cF)(),r=(0,g.iH)(i,(0,C.Z)());(0,g.KV)(r,O).then((function(n){(0,g.Jt)(n.ref).then((function(n){t.createProfile(a,(0,d.Z)((0,u.Z)({},e),{imgLink:n})).then((function(){s(),w(!1)}))}))}))}else t.createProfile(a,e).then((function(){s(),w(!1),n({msg:"Successfully created profile!",severity:"success"})}))}},children:"Create"})]})]})},b=function(){var e=(0,l.useState)(!1),n=e[0],t=e[1];return(0,i.jsx)(r.Z,{maxWidth:"sm",mx:"auto",mt:2,children:(0,i.jsxs)(a.Z,{sx:{p:2},children:[(0,i.jsx)(s.Z,{variant:"h5",children:"Welcome to Our Home!"}),(0,i.jsx)(s.Z,{variant:"h6",mb:2,children:"It looks like you don't have a profile yet, would you like to create one?"}),(0,i.jsx)(o.Z,{direction:"row",justifyContent:"center",mb:2,children:(0,i.jsx)(c.Z,{variant:"contained",onClick:function(){return t(!0)},children:"Create a profile"})}),(0,i.jsx)(s.Z,{variant:"caption",children:"Creating a profile allows you to create/join a budget and opens the door to family/household management!"}),(0,i.jsx)(w,{isOpen:n,setIsOpen:t})]})})}}},function(e){e.O(0,[678,941,876,28,737,69,774,888,179],(function(){return n=48312,e(e.s=n);var n}));var n=e.O();_N_E=n}]);