(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[894],{29e3:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/groceryList",function(){return t(71192)}])},71192:function(e,n,t){"use strict";t.r(n);var i=t(81904),r=t(37559),a=t(96627),s=t(28598),o=t(82684),c=t(84166),l=t(73073),u=t(41826),d=t(16100),f=t(70136),m=t(82015),h=t(97648),x=t(93720),v=t(95414),g=t(84407),Z=t(27558),p=t(4374),y=t(58868),j=t(55512),C=t(14048),b=t(82956);n.default=function(){var e=(0,o.useContext)(l.Il).setSnackbarData,n=(0,o.useContext)(u.f),t=(0,o.useContext)(l.St),k=t.profile,I=t.family,S=t.setFamily,N=(0,o.useState)(!1),E=N[0],L=N[1];if(!k)return(0,s.jsx)(j.Z,{});if(!I)return(0,s.jsx)(c.Z,{});var w=(0,o.useMemo)((function(){return I.groceryList.length>0&&I.groceryList.some((function(e){return e.isBought}))}),[I.groceryList]);return(0,o.useEffect)((function(){var e=(0,y.cf)((0,y.JU)(n.db,d.ow.family,k.familyId),(function(e){var n=e.data();n&&S(n)}));return function(){return e()}}),[]),(0,s.jsxs)(f.Z,{maxWidth:"md",mx:"auto",mt:2,children:[(0,s.jsxs)(m.Z,{sx:{p:2},children:[(0,s.jsx)(h.Z,{variant:"h3",mb:2,children:"Grocery List"}),(0,s.jsx)(x.Z,{variant:"contained",onClick:function(){return L(!0)},children:"Add item"}),(0,s.jsx)(b.Z5,{onDragEnd:function(e){var t=e.type,i=e.source,r=e.destination;if(i&&r&&t&&"gListItem"===t){var s=(0,a.Z)(I.groceryList),o=s[i.index];s.splice(i.index,1),s.splice(r.index,0,o),n.updateFamily(k.familyId,{groceryList:s})}},children:(0,s.jsx)(b.bK,{droppableId:"groceryList",type:"gListItem",children:function(e){return(0,s.jsxs)(v.Z,(0,r.Z)((0,i.Z)({},e.droppableProps),{ref:e.innerRef,sx:{mt:2},children:[I.groceryList.map((function(e,t){return(0,s.jsx)(b._l,{draggableId:"".concat(t),index:t,children:function(o){return(0,s.jsx)(g.ZP,(0,r.Z)((0,i.Z)({},o.draggableProps,o.dragHandleProps),{ref:o.innerRef,children:(0,s.jsx)(Z.Z,{control:(0,s.jsx)(p.Z,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:e.isBought,onChange:function(e){return function(e,t,i){var r=(0,a.Z)(I.groceryList);t&&(r[e].name=t),r[e].isBought=i,n.updateFamily(k.familyId,{groceryList:r})}(t,void 0,e.target.checked)}}),label:e.name})}))}},t)})),e.placeholder]}))}})}),w&&(0,s.jsx)(x.Z,{variant:"outlined",onClick:function(){var e=I.groceryList.filter((function(e){return!1===e.isBought}));n.updateFamily(k.familyId,{groceryList:e})},sx:{mt:8},children:"Remove checked items"})]}),(0,s.jsx)(C.Z,{initialValue:"",titleVerb:"Add",fieldName:"Grocery item",fieldType:"EntityName",isOpen:E,onClosed:function(){return L(!1)},onSubmitValue:function(t){t&&n.updateFamily(k.familyId,{groceryList:(0,y.vr)({name:t,isBought:!1})}).then((function(){e({msg:"Successfully added item!",severity:"success"})}))}})]})}},14048:function(e,n,t){"use strict";t.d(n,{Z:function(){return j}});var i=t(28598),r=t(82684),a=t(40076),s=t(18567),o=t(35127),c=t(82561),l=t(51537),u=t(22546),d=t(67929),f=t(74141),m=t(84446),h=t(93720),x={Email:{name:"email",regex:/^[^@\s]+@[^@\s]+\.[^@\s]+$/,valErrMsg:"Please provide a valid email"},Password:{name:"password",regex:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/,valErrMsg:"Password must be a minimum of eight characters, and contain at least one letter and number"},EntityName:{name:"entityName",regex:/^[\s\S]{1,50}$/,valErrMsg:"Entity names have a max length of 50 characters"},ItemName:{name:"itemName",regex:/^[\s\S]{1,100}$/,valErrMsg:"Item names have a max length of 100 characters"},ApiToken:{name:"apiToken",regex:/^[A-Za-z0-9_-]*$/,valErrMsg:"API tokens can only contain letters, numbers, hyphens, and underscores"},DecimalNum:{name:"decimalNum",regex:/^[+-]?([0-9]+\.?[0-9]*|\.[0-9]+)$/,valErrMsg:"Numerical values can only contain numbers, decimals, and signs"}},v="Field cannot be empty",g="Item names must be unique",Z=t(18786),p=t(5295),y=t(22912),j=function(e){var n=e.initialValue,t=e.isMonetaryValue,j=e.fieldName,C=e.fieldType,b=e.onSubmitValue,k=e.isOpen,I=e.onClosed,S=e.isValUnique,N=e.titleVerb,E=void 0===N?"Edit":N,L=(0,r.useState)(void 0),w=L[0],F=L[1],P=(0,r.useState)(null!==n&&void 0!==n?n:""),O=P[0],_=P[1];if("ItemName"===C&&!S)return console.error("Field is of type ItemName, but no function was provided to validate uniqueness."),null;var M=function(e){_(null!==e&&void 0!==e?e:""),e?!S||S(e)?e.match(x[C].regex)?F(void 0):F(x[C].valErrMsg):F(g):F(v)};return(0,r.useEffect)((function(){_(null!==n&&void 0!==n?n:"")}),[n]),(0,i.jsxs)(a.Z,{open:k,onClose:I,fullWidth:!0,style:{marginBottom:"35vh"},children:[(0,i.jsx)(s.Z,{children:"".concat(E," ").concat(j)}),(0,i.jsx)(o.Z,{children:(0,i.jsxs)(c.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,i.jsx)(l.Z,{variant:"standard",label:j,value:O,onChange:function(e){return M(e.target.value)},error:!!w,helperText:w,InputProps:{startAdornment:t?(0,i.jsx)(u.Z,{position:"start",children:"$"}):void 0},required:!0,autoFocus:!0}),t&&(0,i.jsx)(d.Z,{title:"Calculate value",children:(0,i.jsx)(f.Z,{onClick:function(){O&&M("".concat((0,p.NMM)((0,y.ku)(O),2)))},sx:{height:"50%"},children:(0,i.jsx)(Z.Z,{})})})]})}),(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(h.Z,{onClick:I,children:"Cancel"}),(0,i.jsx)(h.Z,{variant:"contained",disabled:!!w,onClick:function(){O!==n&&b(O),I()},children:"Save"})]})]})}},84166:function(e,n,t){"use strict";t.d(n,{Z:function(){return y}});var i=t(28598),r=t(70136),a=t(82015),s=t(97648),o=t(80464),c=t(82561),l=t(93720),u=t(82684),d=t(40076),f=t(18567),m=t(35127),h=t(51537),x=t(84446),v=t(55402),g=t(73073),Z=t(41826),p=function(e){var n=(0,u.useContext)(g.Il).setSnackbarData,t=(0,u.useContext)(Z.f),r=(0,u.useContext)(g.St),a=r.userId,s=r.getProfile,o=r.getFamily,p=e.isOpen,y=e.setIsOpen,j=(0,u.useState)(void 0),C=j[0],b=j[1];return(0,i.jsxs)(d.Z,{open:p,onClose:function(){return y(!1)},fullWidth:!0,children:[(0,i.jsx)(f.Z,{children:"Create Family"}),(0,i.jsx)(m.Z,{children:(0,i.jsx)(c.Z,{children:(0,i.jsx)(h.Z,{autoFocus:!0,variant:"standard",label:"Family (Last) Name",value:C,onChange:function(e){return b(e.target.value)},required:!0})})}),(0,i.jsxs)(x.Z,{children:[(0,i.jsx)(l.Z,{onClick:function(){return y(!1)},children:"Cancel"}),(0,i.jsx)(l.Z,{variant:"contained",onClick:function(){if(a&&C){var e=(0,v.Z)(),i={name:C,headOfFamily:a,members:[a],boardMarkdown:"This is the family board!",pets:[],vehicles:[],residences:[],groceryList:[]};t.createFamily(e,i).then((function(){o(),n({msg:"Successfully created family!",severity:"success"})})),t.updateProfile(a,{familyId:e}).then((function(){s()})),y(!1)}},children:"Create"})]})]})},y=function(){var e=(0,u.useState)(!1),n=e[0],t=e[1];return(0,i.jsx)(r.Z,{maxWidth:"sm",mx:"auto",mt:3,children:(0,i.jsxs)(a.Z,{sx:{p:2},children:[(0,i.jsx)(s.Z,{variant:"h5",mb:3,children:"We couldn't find a family for this profile!"}),(0,i.jsx)(s.Z,{variant:"h6",textAlign:"center",children:"Ask your head-of-household for their family invite link"}),(0,i.jsx)(o.Z,{sx:{width:250,mx:"auto",mt:2,mb:2},children:"OR"}),(0,i.jsx)(c.Z,{direction:"row",justifyContent:"center",children:(0,i.jsx)(l.Z,{variant:"contained",onClick:function(){return t(!0)},children:"Create a family"})}),(0,i.jsx)(p,{isOpen:n,setIsOpen:t})]})})}},55512:function(e,n,t){"use strict";t.d(n,{Z:function(){return k}});var i=t(28598),r=t(70136),a=t(82015),s=t(97648),o=t(82561),c=t(93720),l=t(82684),u=t(81904),d=t(37559),f=t(40076),m=t(18567),h=t(35127),x=t(51537),v=t(10673),g=t(84446),Z=t(54219),p=t(73073),y=t(41826),j=t(63422),C=t(55402),b=function(e){var n=(0,l.useContext)(p.Il).setSnackbarData,t=(0,l.useContext)(y.f),r=(0,l.useContext)(p.St),a=r.userId,s=r.getProfile,o=e.isOpen,b=e.setIsOpen,k=(0,l.useState)(void 0),I=k[0],S=k[1],N=(0,l.useState)(void 0),E=N[0],L=N[1],w=(0,l.useState)(null),F=w[0],P=w[1];return(0,i.jsxs)(f.Z,{open:o,onClose:function(){return b(!1)},fullWidth:!0,children:[(0,i.jsx)(m.Z,{children:"Create Profile"}),(0,i.jsxs)(h.Z,{children:[(0,i.jsx)(x.Z,{autoFocus:!0,variant:"standard",label:"First Name",value:I,onChange:function(e){return S(e.target.value)},required:!0,error:!!E,helperText:E}),(0,i.jsx)(v.Z,{sx:{mt:3},children:"Upload Photo"}),(0,i.jsx)(Z.DropzoneArea,{acceptedFiles:["image/jpeg","image/png"],filesLimit:1,onChange:function(e){return P(e[0])},fileObjects:[]})]}),(0,i.jsxs)(g.Z,{children:[(0,i.jsx)(c.Z,{onClick:function(){return b(!1)},children:"Cancel"}),(0,i.jsx)(c.Z,{variant:"contained",onClick:function(){if((I?I.includes(" ")?(L("The name cannot contain spaces!"),0):(L(void 0),1):(L("You must input a name!"),0))&&a&&I){var e={firstName:I,familyId:""};if(F){var i=(0,j.cF)(),r=(0,j.iH)(i,(0,C.Z)());(0,j.KV)(r,F).then((function(n){(0,j.Jt)(n.ref).then((function(n){t.createProfile(a,(0,d.Z)((0,u.Z)({},e),{imgLink:n})).then((function(){s(),b(!1)}))}))}))}else t.createProfile(a,e).then((function(){s(),b(!1),n({msg:"Successfully created profile!",severity:"success"})}))}},children:"Create"})]})]})},k=function(){var e=(0,l.useState)(!1),n=e[0],t=e[1];return(0,i.jsx)(r.Z,{maxWidth:"sm",mx:"auto",mt:2,children:(0,i.jsxs)(a.Z,{sx:{p:2},children:[(0,i.jsx)(s.Z,{variant:"h5",children:"Welcome to Our Home!"}),(0,i.jsx)(s.Z,{variant:"h6",mb:2,children:"It looks like you don't have a profile yet, would you like to create one?"}),(0,i.jsx)(o.Z,{direction:"row",justifyContent:"center",mb:2,children:(0,i.jsx)(c.Z,{variant:"contained",onClick:function(){return t(!0)},children:"Create a profile"})}),(0,i.jsx)(s.Z,{variant:"caption",children:"Creating a profile allows you to create/join a budget and opens the door to family/household management!"}),(0,i.jsx)(b,{isOpen:n,setIsOpen:t})]})})}},75042:function(){}},function(e){e.O(0,[630,876,28,737,919,435,774,888,179],(function(){return n=29e3,e(e.s=n);var n}));var n=e.O();_N_E=n}]);